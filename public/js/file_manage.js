!function(t){var n={};function e(a){if(n[a])return n[a].exports;var o=n[a]={i:a,l:!1,exports:{}};return t[a].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=t,e.c=n,e.d=function(t,n,a){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:a})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(e.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(a,o,function(n){return t[n]}.bind(null,o));return a},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="/",e(e.s=0)}([function(t,n,e){t.exports=e(1)},function(t,n){$(document).ready((function(){var t=null,n=rootPath;$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$(document).on("click","button#btn_new_folder",(function(){$.ajax({url:"/file/create-folder",type:"POST",data:{parent:n},success:function(t){return e(t)},error:function(t){showToast(0,"Error occured !")}})})),$(document).on("click","button.btn-open",(function(){n=$(this).parent().parent().attr("data-path"),$.ajax({type:"GET",url:"/file/open-folder?path=".concat(n),success:function(t){return e(t)},error:function(t){showToast(0,"Error Occured !")}})})),$(document).on("click","button#btn_move_up",(function(){if(n==rootPath)return alert("Now root folder");n=n.slice(0,n.lastIndexOf("/")),$.ajax({type:"GET",url:"/file/open-folder?path=".concat(n),success:function(t){return e(t)},error:function(t){return showToast(0,"Error occured !")}})})),$(document).on("click","button#btn_new_file",(function(){document.getElementById("inpt_new_file").click()})),$(document).on("change","input#inpt_new_file",(function(){var t=$(this).val();if(t){var n=t.substr(t.lastIndexOf(".")+1);if(["jpg","jpeg","png","bmp","gif"].indexOf(n.toLowerCase())<0)return $(btnUploadFile).prop("disabled",!0),$(btnUploadFile).html('<i class="fa fa-file-upload mr-1"></i>'),showToast(0,"Please choose image file");$(this).parent().find("span").html(t.substr(t.lastIndexOf("\\")+1)),$(this).parent().prop("disabled",!0),$(this).parent().next().prop("disabled",!1)}})),$(document).on("click","button#btn_upload_file",(function(){var t=$(this),a=new FormData,o=document.querySelector("input#inpt_new_file").files[0];a.append("file",o),a.append("path",n),$(t).prop("disabled",!0),$(t).html('<i class="fa fa-spinner fa-pulse"></i>'),$.ajax({url:"/file/upload",type:"post",data:a,contentType:!1,processData:!1,enctype:"multipart/form-data",success:function(n){n.result?(e(n.data),showToast(1,"Uploaded Successfully")):showToast(0,n.message),$(t).prop("disabled",!0),$(t).html('<i class="fa fa-file-upload mr-1"></i>'),$("button#btn_new_file").find("span").html('<i class="fa fa-plus mr-1"></i> New File'),$("button#btn_new_file").prop("disabled",!1),$("input#inpt_new_file").val("")},error:function(t){showToast(0,"Error Occured !")}})})),$(document).on("click","button.btn-delete-file",(function(){$(this).parents("div.top-container");$.ajax({type:"DELETE",url:"/file/delete",data:{type:"file",path:$(this).parent().parent().attr("data-path"),currentPath:n},success:function(t){t.result?($("div.tooltip").remove(),e(t.data),showToast(1,"Removed Successfully !")):showToast(0,t.message)},error:function(t){showToast(0,"Error Occured")}})})),$(document).on("click","button.btn-delete-folder",(function(){$(this).parents("div.top-container");$.ajax({type:"DELETE",url:"/file/delete",data:{type:"folder",path:$(this).parent().parent().attr("data-path"),currentPath:n},success:function(t){t.result?($("div.tooltip").remove(),e(t.data),showToast(1,"Removed Successfully !")):showToast(0,t.message)},error:function(t){showToast(0,"Error occured !")}})})),$(document).on("blur","input.inpt-rename",(function(){$(this).val($(this).parents("div.top-container").find("p.font-w600").text().trim())})),$(document).on("keyup","input.inpt-rename",(function(t){if("13"==t.keyCode){if(!$(this).val())return;if($(this).val().substr($(this).val().lastIndexOf(".")+1)!==$(this).parents("div.top-container").find("p.font-w600").text().trim().substr($(this).parents("div.top-container").find("p.font-w600").text().trim().lastIndexOf(".")+1)&&!$(this).attr("data-type"))return showToast(0,"Sorry can not changed the file extension");var n=$(this),e=$(n).parent().parent().parent();$.ajax({type:"PATCH",url:"/file/rename",data:{original:$(e).attr("data-path"),modify:$(n).val()},success:function(t){t.result?($(n).parents("div.top-container").find("p.font-w600").text($(n).val()),$(e).attr("data-path","".concat($(e).attr("data-path").slice(0,$(e).attr("data-path").lastIndexOf("/")),"/").concat($(n).val())),showToast(1,"Renamed Successfully !")):showToast(0,t.message)},error:function(t){showToast(0,"Error Occured !")}})}})),$(document).on("click","button.btn-cut",(function(){t=$(this).parents("div.options-overlay-content").attr("data-path");for(var n=$("div.content-container"),e=0;e<n.length;e++)$(n[e]).css({opacity:"1"});$(this).parents("div.top-container").find("div.content-container").css({opacity:"0.5"})})),$(document).on("click","button.btn-paste",(function(){if(!t)return showToast(0,"Nothing to paste !");$.ajax({type:"PATCH",url:"/file/move",data:{source:t,dest:$(this).parents("div.options-overlay-content").attr("data-path"),currentPath:n},success:function(n){return n.result?($("div[data-path='".concat(t,"']"))&&$("div[data-path='".concat(t,"']")).parents("div.top-container").remove(),t=null,showToast(1,"Moved Successfully !"),e(n.data)):showToast(0,n.message)},error:function(t){showToast(0,"Error Occured !")}})})),$(document).on("click","button.btn-assign",(function(){if(!t)return showToast(0,"Nothing to assign !");for(var n=$("div.content-container"),e=0;e<n.length;e++)$(n[e]).css({opacity:"1"});$.ajax({type:"PATCH",url:"/file/assign",data:{source:t,dest:$(this).parent().attr("data-folder")},success:function(n){return n.result?(t=null,showToast(1,"Assigned Successfully !")):showToast(0,n.message)},error:function(t){showToast(0,"Error Occured !")}})}))}));var e=function(t){var n="",e="";$("h2#folder-heading").html('\n        <i class="far fa-fw fa-folder mr-1"></i> Folders ('.concat(t.folders.length,")\n    ")),$("h2#file-heading").html('\n        <i class="far fa-fw fa-file mr-1"></i> Files ('.concat(t.files.length,")\n    "));for(var a=0;a<t.folders.length;a++)n+='\n            <div class="col-sm-6 col-md-4 col-xl-3 d-flex align-items-center top-container">\n                <div class="options-container fx-overlay-zoom-in w-100">\n                    <div class="options-item block block-rounded block-transparent mb-0 content-container">\n                        <div class="block-content text-center">\n                            <p class="mb-2">\n                                <i class="fa fa-folder fa-4x text-info"></i>\n                            </p>\n                            <p class="font-w600 font-size-lg mb-0">\n                                '.concat(t.folders[a].name,'\n                            </p>\n                            <p class="font-size-sm text-muted">\n                                (').concat(t.folders[a].file_count,')\n                            </p>\n                        </div>\n                    </div>\n                    <div class="options-overlay rounded-lg bg-white-50">\n                        <div class="options-overlay-content" data-path = "').concat(t.folders[a].fullpath,'">\n                            <div class="mt-3 mb-3">\n                                <button class="btn btn-hero-light btn-open">\n                                    <i class="fa fa-share text-primary mr-1"></i> Open\n                                </button>\n                            </div>\n                            <div class="btn-group mb-3">\n                                ').concat(t.permissions.move?'<button class="btn btn-sm btn-light btn-cut">\n                                    <i class="fa fa-cut text-primary mr-1"></i>\n                                    </button>\n                                    <button class="btn btn-sm btn-light btn-paste">\n                                        <i class="fa fa-paste mr-1"></i>\n                                    </button>':"","\n                                ").concat(t.permissions.delete?'<button class="btn btn-sm btn-light btn-delete-folder" data-toggle="tooltip" data-animation="true" data-placement="bottom" title="Really delete this folder?">\n                                        <i class="fa fa-trash text-danger mr-1"></i>\n                                    </button>':"","\n                            </div>\n                            ").concat(t.permissions.rename?'<div class="form-group">\n                                    <div class="input-group">\n                                        <input type="text" value = "'.concat(t.folders[a].name,'" data-type="folder" class="form-control inpt-rename" placeholder="type name...">\n                                    </div>\n                                </div>'):"","\n                        </div>\n                    </div>\n                </div>\n            </div>\n        ");for(var o=0;o<t.files.length;o++)e+='\n            <div class="col-sm-6 col-md-4 col-xl-3 d-flex align-items-center top-container">\n                <div class="options-container w-100">\n                    <div class="options-item block block-rounded block-transparent mb-0 content-container">\n                        <div class="block-content text-center">\n                            <p class="mb-2 overflow-hidden">\n                                <img class="img-fluid" src="/storage/'.concat(t.files[o].fullpath,'" alt="">\n                            </p>\n                            <p class="font-w600 mb-0">\n                                ').concat(t.files[o].name,'\n                            </p>\n                            <p class="font-size-sm text-muted">\n                                ').concat(t.files[o].size,'\n                            </p>\n                        </div>\n                    </div>\n\n                    <div class="options-overlay rounded-lg bg-white-50">\n                        <div class="options-overlay-content" data-path = "').concat(t.files[o].fullpath,'">\n                            <div class="mb-3">\n                                <a class="btn btn-hero-light img-lightbox" href="/storage/').concat(t.files[o].fullpath,'">\n                                    <i class="fa fa-eye text-primary mr-1"></i> View\n                                </a>\n                            </div>\n                            <div class="btn-group mb-3">\n                                ').concat(t.permissions.move?'<button class="btn btn-sm btn-light btn-cut">\n                                        <i class="fa fa-cut text-primary mr-1"></i>\n                                    </button>':"","\n                                ").concat($("div#div_users_list").length?'<button class="btn btn-sm btn-light btn-cut">\n                                        <i class="far fa-clipboard text-primary mr-1"></i>\n                                    </button>':"",'\n                                <a class="btn btn-sm btn-light" href="/file/download?path=').concat(t.files[o].fullpath,'">\n                                    <i class="fa fa-download text-black mr-1"></i>\n                                </a>\n                                ').concat(t.permissions.delete?'<button class="btn btn-sm btn-light btn-delete-file" data-toggle="tooltip" data-animation="true" data-placement="bottom" title="Really delete this photo ?">\n                                        <i class="fa fa-trash text-danger mr-1"></i>\n                                    </button>':"","\n                            </div>\n                            ").concat(t.permissions.rename?'<div class="form-group">\n                                    <div class="input-group">\n                                        <input type="text" value = "'.concat(t.files[o].name,'" class="form-control inpt-rename" placeholder="type name...">\n                                    </div>\n                                </div>'):"","\n                        </div>\n                    </div>\n                </div>\n            </div>\n        ");$("div#div_folder_container").html(n),$("div#div_file_container").html(e),$("[data-toggle='tooltip']").tooltip()}}]);